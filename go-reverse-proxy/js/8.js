_jsload_('AMap.Scale', '!function(){"use strict";var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};var defultOpts={position:"LB",offset:[15,25]},Scale=function(_super){function __(){this.constructor=d}var d,b;function Scale(opts){void 0===opts&&(opts=defultOpts);var _this=_super.call(this,opts)||this;return _this._className="scalecontrol",_this._scaleLevel=[[1e7,"10000"],[5e6,"5000"],[2e6,"2000"],[1e6,"1000"],[5e5,"500"],[2e5,"200"],[1e5,"100"],[1e5,"100"],[5e4,"50"],[2e4,"20"],[1e4,"10"],[5e3,"5"],[2e3,"2"],[1e3,"1"],[500,"500"],[200,"200"],[200,"200"],[100,"100"],[50,"50"],[20,"20"],[5,"5"],[2,"2"],[2,"2"]],_this._handleViewChange=_this._handleViewChange.bind(_this),_this._config=AMap.extend(defultOpts,opts),_this.initContainer(),_this}return extendStatics(d=Scale,b=_super),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __),Scale.prototype.addTo=function(map){_super.prototype.addTo.call(this,map),this._initUI(),map.on("viewchange",this._handleViewChange)},Scale.prototype.remove=function(){this.map&&this.map.off("viewchange",this._handleViewChange),this._destroyUI(),_super.prototype.remove.call(this)},Scale.prototype.removeFrom=function(map){map&&map.off("viewchange",this._handleViewChange),this._destroyUI(),_super.prototype.removeFrom.call(this,map)},Scale.prototype._handleViewChange=function(){this._updateUI()},Scale.prototype._initUI=function(){this._text=AMap.DomUtil.create("div",this._container,"amap-scale-text"),this._line=AMap.DomUtil.create("div",this._container,"amap-scale-line"),this._lineLeft=AMap.DomUtil.create("div",this._container,"amap-scale-edgeleft"),this._lineRight=AMap.DomUtil.create("div",this._container,"amap-scale-edgeright"),this._lineMid=AMap.DomUtil.create("div",this._container,"amap-scale-middle"),this._line.appendChild(this._lineLeft),this._line.appendChild(this._lineMid),this._line.appendChild(this._lineRight),this._updateUI()},Scale.prototype._destroyUI=function(){for(;this._container.firstChild;)this._container.removeChild(this._container.firstChild)},Scale.prototype._updateUI=function(){for(var resolution=this.map.getView().getStatus(),optimalZoom=resolution.optimalZoom,scale=resolution.center,resolution=resolution.resolution,level=(this.map.getSize().toArray(),optimalZoom-1),coordX=resolution*Math.cos(scale[1]/180*Math.PI),len=this._scaleLevel[level][0]/coordX,i=level;i<this._scaleLevel.length&&!((len=this._scaleLevel[level][0]/coordX)<120);i++)level++,level=Math.min(level,this._scaleLevel.length-1);scale=this._scaleLevel[level][1];scale+=level<=13?" 公里":" 米",this._text.innerText=scale,this._text.style.width=len+8+"px",this._lineMid.style.width=len+"px",this._lineRight.style.left=len+1+"px"},Scale}(AMap.Control);AMap.Scale=Scale}(); ')